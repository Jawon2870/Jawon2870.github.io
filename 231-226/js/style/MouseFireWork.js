
//鼠标点击烟花效果，来源：http://itpika.com/2021/07/30/opensource/mousedown/
function clickEffect(){let t=[],e=!1,i,n=0,s,l,r,o,d,h=["#F73859","#14FFEC","#00E0FF","#FF99FE","#FAF15D"],c=document.createElement("canvas");document.body.appendChild(c),c.setAttribute("style","width: 100%; height: 100%; top: 0; left: 0; z-index: 99999; position: fixed; pointer-events: none;");let a=document.createElement("span");function $(){c.width=2*window.innerWidth,c.height=2*window.innerHeight,c.style.width=window.innerWidth+"px",c.style.height=window.innerHeight+"px",d.scale(2,2),r={x:(s=c.width=window.innerWidth)/2,y:(l=c.height=window.innerHeight)/2},o={x:s/2,y:l/2}}a.classList.add("pointer"),document.body.appendChild(a),c.getContext&&window.addEventListener?(d=c.getContext("2d"),$(),window.addEventListener("resize",$,!1),function i(){d.fillStyle="rgba(255, 255, 255, 0)",d.clearRect(0,0,c.width,c.height);for(let r=0;r<t.length;r++){let o=t[r];o.r<0||(d.fillStyle=o.color,d.beginPath(),d.arc(o.x,o.y,o.r,0,2*Math.PI,!1),d.fill(),o.update())}!0==e?n+=.2:!e&&n>=0&&(n-=.4),function e(){for(let i=0;i<t.length;i++){let n=t[i];(n.x+n.r<0||n.x-n.r>s||n.y+n.r<0||n.y-n.r>l||n.r<0)&&t.splice(i,1)}}(),requestAnimationFrame(i)}(),window.addEventListener("mousedown",function(t){y(u(10,20),t.clientX,t.clientY),document.body.classList.add("is-pressed"),i=setTimeout(function(){document.body.classList.add("is-longpress"),e=!0},500)},!1),window.addEventListener("mouseup",function(t){clearInterval(i),!0==e&&(document.body.classList.remove("is-longpress"),y(u(50+Math.ceil(n),100+Math.ceil(n)),t.clientX,t.clientY),e=!1),document.body.classList.remove("is-pressed")},!1),window.addEventListener("mousemove",function(t){let e=t.clientX,i=t.clientY;a.style.top=i+"px",a.style.left=e+"px"},!1)):console.log("canvas or addEventListener is unsupported!");class p{constructor(t=r.x,i=r.y){this.x=t,this.y=i,this.angle=2*Math.PI*Math.random(),!0==e?this.multiplier=u(14+n,15+n):this.multiplier=u(6,12),this.vx=(this.multiplier+.5*Math.random())*Math.cos(this.angle),this.vy=(this.multiplier+.5*Math.random())*Math.sin(this.angle),this.r=u(8,12)+3*Math.random(),this.color=h[Math.floor(Math.random()*h.length)]}update(){this.x+=this.vx-o.x,this.y+=this.vy-o.y,o.x=-2/window.innerWidth*Math.sin(this.angle),o.y=-2/window.innerHeight*Math.cos(this.angle),this.r-=.3,this.vx*=.9,this.vy*=.9}}function y(e=1,i=r.x,n=r.y){for(let s=0;s<e;s++)t.push(new p(i,n))}function u(t,e){return Math.floor(Math.random()*e)+t}}clickEffect();